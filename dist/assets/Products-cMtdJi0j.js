import{r as c,j as e,m as le,A as lt}from"./motion-nlp61u-b.js";import{E as ct}from"./pdf-5wwnjtHl.js";import{H as dt}from"./index-Cm5v8gjG.js";import"./vendor-C6Ba5J37.js";const mt=[{id:1,name:"Red Color Shell",image:"/assets/RedShell.jpg",video:"/assets/RedShellVideo.mp4",description:"A dazzling red aerial burst that lights up the night sky â€” perfect for grand finales and festive highlights.",sizes:[{size:"3 inch",price:1500},{size:"4 inch",price:2400}],hoverColor:"hover:shadow-red-400/70"},{id:2,name:"Yellow Color Shell",image:"/assets/YellowShell.jpg",video:"/assets/YellowShell.mp4",description:"A bright yellow aerial shell that bursts into a stunning display â€” perfect for celebrations and festive occasions.",sizes:[{size:"3 inch",price:1500},{size:"4 inch",price:2400}],hoverColor:"hover:shadow-yellow-400/70"},{id:3,name:"Green Shell",image:"/assets/GreenShell.jpg",video:"/assets/GreenShell.mp4",description:"Bright green bursts with a vibrant, lively effect.",sizes:[{size:"3 inch",price:1500},{size:"4 inch",price:2400}],hoverColor:"hover:shadow-green-400/70"},{id:4,name:"Gold Shell",image:"/assets/GoldShell.jpg",video:"/assets/GoldShell.mp4",description:"Classic golden bloom with a smooth, quiet finish.",sizes:[{size:"4 inch",price:2400}],hoverColor:"hover:shadow-amber-400/70"},{id:5,name:"Purple Shell",image:"/assets/PurpleShell.jpg",video:"/assets/PurpleShell.mp4",description:"Soft purple bursts with a graceful bloom effect.",sizes:[{size:"4 inch",price:2400}],hoverColor:"hover:shadow-purple-400/70"},{id:6,name:"Crackling Gold Shell",image:"/assets/CracklingShell.jpg",video:"/assets/CracklingShell.mp4",description:"Ignites the sky with golden crackles and a shimmering rain effect â€” perfect for adding dramatic flair to any show.",sizes:[{size:"4 inch",price:2400}],hoverColor:"hover:shadow-yellow-400/70"},{id:7,name:"White Shell",image:"/assets/WhiteShell.jpg",video:"/assets/WhiteShell.mp4",description:"Elegant white bursts with a sparkling finish.",sizes:[{size:"4 inch",price:2400}],hoverColor:"hover:shadow-gray-500/70"},{id:8,name:"Blue Shell",image:"/assets/BlueShell.jpg",video:"/assets/BlueShell.mp4",description:"Stunning blue bursts with a cool, calming effect.",sizes:[{size:"4 inch",price:2400}],hoverColor:"hover:shadow-blue-400/70"},{id:9,name:"Silver Shell",image:"/assets/SilverShell.jpg",video:"/assets/SilverShell.mp4",description:"Elegant silver bursts with a sparkling finish.",sizes:[{size:"3 inch",price:1500}],hoverColor:"hover:shadow-gray-400/70"},{id:18,name:"Multi Color Shell",image:"/assets/MultiColorShell2.jpg",video:"/assets/MultiColorShell2.mp4",description:"A vibrant mix of colors bursting in the sky, creating a spectacular visual feast.",sizes:[{size:"4 inch",price:2400}],hoverColor:"hover:shadow-pink-400/70"},{id:10,name:"Star Shell Battery",image:"/assets/MultiColorShell.jpg",video:"/assets/MultiColorShell.mp4",description:"A vibrant mix of colors bursting in the sky, firing 3 shells at once for a grand display.",sizes:[{size:"3 Shells",price:5e3}],hoverColor:"hover:shadow-pink-400/70"},{id:11,name:"Water Fall",image:"/assets/WaterFall.jpg",video:"/assets/WaterFall.mp4",description:"A beautiful silver cascade combo ideal for weddings and special events.",sizes:[{size:"12pcs",price:2500}],hoverColor:"hover:shadow-sky-400/70"},{id:12,name:"Silver Rocket Battery",image:"/assets/SilverRocketBattery.jpg",video:"/assets/SilverRocketBattery.mp4",description:"A stunning silver rocket battery that lights up the sky with cascading effects.",sizes:[{size:"",price:1800}],hoverColor:"hover:shadow-gray-300/70"},{id:13,name:"Coconut Tree",image:"/assets/CoconutTree.jpg",video:"/assets/CoconutTree.mp4",description:"Coconut Magic Blossom â€” a beautiful coconut tree effect in a single brilliant color.",sizes:[{size:"",price:900}],hoverColor:"hover:shadow-orange-400/70"},{id:14,name:"Name & Logo",image:"/assets/NameLogo.jpg",video:"/assets/NameLogo.mp4",description:"Custom fireworks display featuring your name or logo.",sizes:[{size:"",price:14e3}],hoverColor:"hover:shadow-yellow-500/70"},{id:15,name:"Sparkler",image:"/assets/Sparkler.jpg",video:"/assets/Sparkler.mp4",description:"A dazzling sparkler that lights up the night with its brilliant glow.",sizes:[{size:"",price:500}],hoverColor:"hover:shadow-yellow-300/70"},{id:16,name:"Color Shots",image:"/assets/ColorShots.jpeg",video:"/assets/ColorShots.mp4",description:"A vibrant display of colors bursting in the sky.",sizes:[{size:"",price:2500}],hoverColor:"hover:shadow-pink-400/70"},{id:17,name:"Crackling Shots",image:"/assets/CracklingShots.jpeg",video:"/assets/CracklingShots.mp4",description:"Exciting crackling effects that add a dynamic touch to any fireworks show.",sizes:[{size:"",price:2500}],hoverColor:"hover:shadow-yellow-400/70"}];/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ht=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,x,d)=>d?d.toUpperCase():x.toLowerCase()),Le=i=>{const r=ht(i);return r.charAt(0).toUpperCase()+r.slice(1)},Ge=(...i)=>i.filter((r,x,d)=>!!r&&r.trim()!==""&&d.indexOf(r)===x).join(" ").trim(),ut=i=>{for(const r in i)if(r.startsWith("aria-")||r==="role"||r==="title")return!0};/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var pt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=c.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:x=2,absoluteStrokeWidth:d,className:y="",children:u,iconNode:w,...b},N)=>c.createElement("svg",{ref:N,...pt,width:r,height:r,stroke:i,strokeWidth:d?Number(x)*24/Number(r):x,className:Ge("lucide",y),...!u&&!ut(b)&&{"aria-hidden":"true"},...b},[...w.map(([v,h])=>c.createElement(v,h)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=(i,r)=>{const x=c.forwardRef(({className:d,...y},u)=>c.createElement(xt,{ref:u,iconNode:r,className:Ge(`lucide-${gt(Le(i))}`,`lucide-${i}`,d),...y}));return x.displayName=Le(i),x};/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],$e=$("check",ft);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],bt=$("file-text",yt);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],wt=$("history",vt);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Nt=$("package",jt);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],Ct=$("refresh-ccw",kt);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],zt=$("search",St);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],we=$("shopping-cart",It);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ve=$("trash-2",Ft);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Dt=$("x",Pt),Tt=({isOpen:i,onClose:r,onAddItem:x})=>{const[d,y]=c.useState(""),[u,w]=c.useState(""),[b,N]=c.useState(""),[v,h]=c.useState("1"),M=c.useRef(null),I=c.useRef(null),E=c.useRef(null),D=c.useMemo(()=>{const f=parseFloat(b)||0,R=parseInt(v,10)||1;return f*R},[b,v]);c.useEffect(()=>{if(!i)return;const f=setTimeout(()=>M.current?.focus(),0);return()=>clearTimeout(f)},[i]),c.useEffect(()=>{if(!i||typeof window>"u")return;E.current=document.activeElement;const f=document.body.style.overflow;document.body.style.overflow="hidden";const R=j=>{if(j.key==="Escape"){j.preventDefault(),r();return}if(j.key!=="Tab")return;const H=I.current;if(!H)return;const L=H.querySelectorAll('a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1")]');if(!L.length)return;const q=L[0],k=L[L.length-1];j.shiftKey?document.activeElement===q&&(j.preventDefault(),k.focus()):document.activeElement===k&&(j.preventDefault(),q.focus())};return window.addEventListener("keydown",R),()=>{window.removeEventListener("keydown",R),document.body.style.overflow=f,E.current?.focus?.()}},[i,r]);const T=()=>{y(""),w(""),N(""),h("1")},Y=()=>{x({name:d,size:u,price:b,qty:v})&&T()},A=d.trim()==="",G=f=>{f.preventDefault(),Y()};return i?e.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50","aria-hidden":"true",onClick:r}),e.jsx(le.div,{ref:I,role:"dialog","aria-modal":"true","aria-labelledby":"add-item-title",initial:{opacity:0,scale:.98,y:-8},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.98,y:-8},transition:{duration:.18},className:"relative bg-white rounded-lg shadow-lg w-full max-w-xs sm:max-w-md md:max-w-2xl p-4 sm:p-6 z-10 mx-4",children:e.jsxs("form",{className:"space-y-6",onSubmit:G,children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{id:"add-item-title",className:"text-lg font-semibold text-gray-900",children:"Add Custom Item"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Quickly add a bespoke firework or service to your quotation."})]}),e.jsx("button",{type:"button",onClick:r,className:"rounded-full border border-gray-200 p-2 text-gray-500 hover:text-gray-700 hover:border-gray-300","aria-label":"Close modal",children:e.jsx(Dt,{size:16})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Item name",e.jsx("input",{ref:M,type:"text",placeholder:"Sparkler kit",value:d,onChange:f=>y(f.target.value),className:"mt-1 border border-gray-300 rounded-lg p-2 w-full focus:outline-none focus:ring-2 focus:ring-indigo-500","aria-label":"Custom item name",required:!0})]}),e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Size (optional)",e.jsx("input",{type:"text",placeholder:"Large display",value:u,onChange:f=>w(f.target.value),className:"mt-1 border border-gray-300 rounded-lg p-2 w-full focus:outline-none focus:ring-2 focus:ring-indigo-500","aria-label":"Custom item size"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Price (LKR)",e.jsx("input",{type:"number",placeholder:"0",min:"0",value:b,onChange:f=>N(f.target.value),className:"mt-1 border border-gray-300 rounded-lg p-2 w-full focus:outline-none focus:ring-2 focus:ring-indigo-500","aria-label":"Custom item price"})]}),e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Quantity",e.jsx("input",{type:"number",placeholder:"1",min:"1",value:v,onChange:f=>h(f.target.value),className:"mt-1 border border-gray-300 rounded-lg p-2 w-full focus:outline-none focus:ring-2 focus:ring-indigo-500","aria-label":"Custom item quantity"})]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-indigo-500 to-pink-500 text-white flex items-center justify-center font-bold text-lg",children:d.slice(0,2).toUpperCase()||"+"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-800",children:d||"Item name"}),e.jsx("div",{className:"text-sm text-gray-500",children:u||"Size"})]})]}),e.jsx("div",{className:"text-xs bg-indigo-100 text-indigo-800 px-2 py-1 rounded",children:"Preview"})]}),e.jsxs("dl",{className:"mt-4 space-y-2 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("dt",{children:"Price"}),e.jsxs("dd",{className:"font-medium",children:["Rs. ",(parseFloat(b)||0).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("dt",{children:"Quantity"}),e.jsx("dd",{className:"font-medium",children:v})]}),e.jsxs("div",{className:"flex items-center justify-between text-pink-600 font-semibold text-lg",children:[e.jsx("dt",{children:"Total"}),e.jsxs("dd",{children:["Rs. ",D.toLocaleString()]})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row-reverse gap-3 sm:items-center sm:justify-between",children:[e.jsxs("button",{type:"submit",disabled:A,className:`inline-flex items-center justify-center gap-2 rounded-md px-4 py-2 text-white ${A?"bg-indigo-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:[e.jsx(we,{size:16,className:"text-white"}),e.jsx("span",{children:"Add Item"})]}),e.jsx("button",{type:"button",onClick:r,className:"inline-flex items-center justify-center gap-2 rounded-md border border-gray-200 px-4 py-2 text-gray-700 hover:bg-gray-50",children:"Cancel"})]})]})})]}):null},He=c.memo(({item:i,productVariants:r,onAddToCart:x})=>e.jsxs(le.div,{className:"bg-white rounded-xl shadow-md border border-gray-200 hover:shadow-lg hover:-translate-y-1 transition-all duration-300 p-3",variants:r,initial:"hidden",whileInView:"visible",viewport:{once:!0},children:[e.jsx("div",{className:"relative w-full aspect-square rounded-lg overflow-hidden mb-2",children:e.jsx("img",{src:i.image,alt:i.name,loading:"lazy",decoding:"async",className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:i.name}),e.jsx("ul",{className:"text-xs text-pink-600 font-medium mb-3",children:i.sizes.map(({size:d,price:y})=>e.jsxs("li",{children:["ðŸ’¥ ",d||"Standard"," â€” LKR ",y]},d||y))}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:i.sizes.map((d,y)=>e.jsxs("button",{onClick:()=>x(i,d),className:"bg-gradient-to-r from-indigo-500 to-pink-500 text-white font-medium px-3 py-1.5 rounded-md hover:opacity-90 transition text-sm inline-flex items-center gap-2",children:[e.jsx(we,{size:14,className:"text-white"}),e.jsxs("span",{className:"text-white",children:["Add ",d.size||"Item"]})]},y))})]}));He.displayName="ProductCard";const At=({products:i,productVariants:r,onAddToCart:x,onAddCustomItem:d})=>{const y=c.useCallback((u,w)=>{x(u,w)},[x]);return e.jsx("div",{className:"max-w-6xl mx-auto mb-16",children:e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:[i.map(u=>e.jsx(He,{item:u,productVariants:r,onAddToCart:y},`${u.id}-${u.name}`)),e.jsx("div",{className:"mb-6 flex items-center justify-center",children:e.jsxs("button",{onClick:d,className:"bg-indigo-600 text-white px-4 py-2 rounded-md shadow hover:bg-indigo-700 inline-flex items-center gap-2",children:[e.jsx(Nt,{size:16,className:"text-white"}),e.jsx("span",{className:"text-white",children:"Add Item"})]})})]})})},Rt=c.memo(At),Lt=({items:i,onNameChange:r,onSizeChange:x,onPriceChange:d,onQtyChange:y,onRemoveItem:u,pdfName:w,onPdfNameChange:b,invoiceTo:N,onInvoiceToChange:v,eventDate:h,onEventDateChange:M,includeEventDate:I,onIncludeEventDateChange:E,includeBankDetails:D,onIncludeBankDetailsChange:T,bankDetails:Y=[],includeGallery:A,onIncludeGalleryChange:G,discount:f,onDiscountChange:R,advance:j,onAdvanceChange:H,totalAfterDiscount:L,balanceDue:q,onGenerateReport:k})=>{const X=i.length>0,O=()=>i.map((m,B)=>e.jsxs("tr",{className:"border-t hover:bg-indigo-50 transition",children:[e.jsx("td",{className:"p-2.5 align-top min-w-[200px]",children:e.jsx("input",{type:"text",value:m.name||"",onChange:F=>r(m,F.target.value),className:"w-full border border-gray-300 rounded-lg p-1.5 text-left text-xs focus:ring-2 focus:ring-indigo-500","aria-label":"Item name"})}),e.jsx("td",{className:"p-2.5 align-top min-w-[140px]",children:e.jsx("input",{type:"text",value:m.size||"",onChange:F=>x(m,F.target.value),className:"w-full border border-gray-300 rounded-lg p-1.5 text-left text-xs focus:ring-2 focus:ring-indigo-500","aria-label":"Item size"})}),e.jsx("td",{className:"p-2.5 text-center",children:e.jsx("span",{className:`inline-block px-2 py-0.5 rounded-full text-xs font-medium ${String(m.id).startsWith("custom-")?"bg-amber-100 text-amber-700":"bg-green-100 text-green-700"}`,children:String(m.id).startsWith("custom-")?"Custom":"Product"})}),e.jsx("td",{className:"p-2.5 align-top",children:e.jsx("input",{type:"number",min:"0",step:"1",value:m.price,onChange:F=>d(m,F.target.value),className:"w-24 border border-gray-300 rounded-lg p-1.5 text-right text-xs focus:ring-2 focus:ring-indigo-500"})}),e.jsx("td",{className:"p-2.5 align-top text-center",children:e.jsx("input",{type:"number",min:"1",value:m.quantity,onChange:F=>{const se=parseInt(F.target.value,10);y(m,Number.isNaN(se)?1:se)},className:"w-16 border border-gray-300 rounded-lg p-1.5 text-center text-xs focus:ring-2 focus:ring-indigo-500"})}),e.jsxs("td",{className:"p-2.5 text-right text-pink-600 font-semibold",children:["Rs.",((parseFloat(m.price)||0)*m.quantity).toLocaleString()]}),e.jsx("td",{className:"p-2.5 text-center",children:e.jsxs("button",{onClick:()=>u(m),className:"text-red-500 hover:underline inline-flex items-center gap-1 text-xs font-semibold",children:[e.jsx(ve,{size:14,className:"text-red-500"}),e.jsx("span",{children:"Remove"})]})})]},B));return e.jsxs("div",{className:"max-w-6xl mx-auto bg-white/90 backdrop-blur-md rounded-2xl shadow-2xl p-8 border border-gray-200",id:"custom-package",children:[e.jsx("h3",{className:"text-2xl font-bold mb-6 text-indigo-700",children:"ðŸ“¦ Your Custom Package"}),X?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"block overflow-x-auto rounded-lg border border-gray-200 mb-6",children:e.jsxs("table",{className:"w-full border-collapse text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-indigo-100 text-indigo-700",children:[e.jsx("th",{className:"p-2.5 text-left",children:"Item"}),e.jsx("th",{className:"p-2.5 text-left",children:"Size"}),e.jsx("th",{className:"p-2.5 text-center",children:"Type"}),e.jsx("th",{className:"p-2.5 text-right",children:"Price"}),e.jsx("th",{className:"p-2.5 text-center",children:"Qty"}),e.jsx("th",{className:"p-2.5 text-right",children:"Total"}),e.jsx("th",{className:"p-2.5 text-center",children:"Action"})]})}),e.jsx("tbody",{children:O()})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[e.jsx("input",{type:"text",placeholder:"Enter invoice name",value:w,onChange:m=>b(m.target.value),className:"border border-gray-300 rounded-lg p-3 w-full focus:ring-2 focus:ring-indigo-500"}),e.jsx("input",{type:"text",placeholder:"Invoice to",value:N,onChange:m=>v(m.target.value),className:"border border-gray-300 rounded-lg p-3 w-full focus:ring-2 focus:ring-indigo-500"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"date","aria-label":"Event date",value:h,onChange:m=>M(m.target.value),className:"border border-gray-300 rounded-lg p-3 flex-1 focus:ring-2 focus:ring-indigo-500"}),e.jsxs("label",{className:`flex cursor-pointer items-center gap-2 rounded-lg border px-3 py-3 transition hover:border-indigo-400 hover:bg-indigo-50/60 ${I?"border-indigo-500 bg-indigo-50 text-indigo-700":"border-gray-300 bg-white text-gray-700"}`,title:"Include event date in PDF",children:[e.jsx("input",{type:"checkbox",checked:I,onChange:m=>E(m.target.checked),className:"sr-only"}),e.jsx("span",{className:`flex h-5 w-5 items-center justify-center rounded-full border-2 transition ${I?"border-indigo-600 bg-indigo-600 text-white":"border-gray-400 text-transparent"}`,"aria-hidden":"true",children:e.jsx($e,{size:12})}),e.jsx("span",{className:"font-semibold text-xs whitespace-nowrap",children:"Event Date"})]})]})]}),e.jsxs("div",{className:`mb-6 rounded-2xl border p-4 transition-colors ${D?"border-indigo-300 bg-indigo-50/60":"border-gray-200 bg-white"}`,children:[e.jsxs("label",{className:"flex cursor-pointer items-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:D,onChange:m=>T(m.target.checked),className:"mt-1 h-4 w-4 accent-indigo-600"}),e.jsxs("div",{className:"flex flex-col text-left",children:[e.jsx("span",{className:"font-semibold text-gray-800",children:"Include bank details in PDF"}),e.jsx("span",{className:"text-xs text-gray-500",children:D?"Bank account details will be added to the invoice":"Check to append your bank information to the PDF"})]})]}),D&&e.jsx("div",{className:"mt-4 grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:Y.map(({label:m,value:B})=>e.jsxs("label",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-600",children:m}),e.jsx("input",{type:"text",value:B,readOnly:!0,className:"border border-indigo-100 bg-indigo-50/60 rounded-lg p-3 text-sm font-medium text-indigo-800"})]},m))})]}),e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between mb-4",children:[e.jsxs("div",{className:"w-full flex flex-col sm:flex-row gap-3",children:[e.jsx("input",{type:"number",placeholder:"Discount (LKR)",value:f,onChange:m=>R(m.target.value),className:"border border-gray-300 rounded-lg p-3 w-full focus:ring-2 focus:ring-indigo-500"}),e.jsx("input",{type:"number",placeholder:"Advance (LKR)",value:j,onChange:m=>H(m.target.value),className:"border border-gray-300 rounded-lg p-3 w-full focus:ring-2 focus:ring-indigo-500"}),e.jsxs("label",{className:`flex w-full cursor-pointer items-center gap-3 rounded-lg border px-3 py-3 transition hover:border-indigo-400 hover:bg-indigo-50/60 ${A?"border-indigo-500 bg-indigo-50 text-indigo-700":"border-gray-300 bg-white text-gray-700"}`,children:[e.jsx("input",{type:"checkbox",checked:A,onChange:m=>G(m.target.checked),className:"sr-only"}),e.jsx("span",{className:`flex h-8 w-8 items-center justify-center rounded-full border-2 transition ${A?"border-indigo-600 bg-indigo-600 text-white":"border-gray-400 text-transparent"}`,"aria-hidden":"true",children:e.jsx($e,{size:18})}),e.jsxs("div",{className:"flex flex-col text-left",children:[e.jsx("span",{className:"font-semibold",children:"Include image gallery pages"}),e.jsx("span",{className:"text-xs text-gray-500",children:A?"Gallery pages will be added to the PDF":"Tap to append gallery pages"})]})]})]}),e.jsxs("div",{className:"text-right w-full sm:w-auto",children:[e.jsxs("p",{className:"text-lg font-semibold text-gray-800",children:["ðŸ’° Total: ",e.jsxs("span",{className:"text-pink-600",children:["Rs.",L.toLocaleString()]})]}),e.jsxs("p",{className:"text-base font-semibold text-gray-800",children:["âš–ï¸ Balance: ",e.jsxs("span",{className:"text-indigo-600",children:["Rs.",q.toLocaleString()]})]})]})]}),e.jsxs("button",{onClick:k,className:"w-full bg-gradient-to-r from-indigo-500 to-pink-500 text-white font-semibold py-3 rounded-lg hover:opacity-90 transition inline-flex items-center justify-center gap-2",children:[e.jsx(bt,{size:16,className:"text-white"}),e.jsx("span",{className:"text-white",children:"Generate PDF"})]})]}):e.jsx("p",{className:"text-gray-500 text-center text-base",children:"No items added yet. Add fireworks to build your custom package!"})]})},$t=({quoteHistory:i,filteredHistory:r,historySearch:x,onHistorySearchChange:d,onClearHistory:y,onLoadQuote:u,onDeleteQuote:w,formatDateDDMMYYYY:b,formatDateTimeReadable:N})=>{const v=i.length>0;return e.jsx("div",{className:"max-w-6xl mx-auto mt-8",children:e.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-2xl shadow-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 text-indigo-700 font-semibold text-xl",children:[e.jsx(wt,{size:20,className:"text-indigo-600"}),e.jsx("span",{children:"Saved Quotations"})]}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[e.jsxs("div",{className:"relative w-full sm:w-72",children:[e.jsx(zt,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:x,onChange:h=>d(h.target.value),placeholder:"Search by name, client or item",className:"w-full rounded-lg border border-gray-200 bg-white pl-10 pr-3 py-2 text-sm focus:border-indigo-400 focus:outline-none focus:ring-2 focus:ring-indigo-200"})]}),v&&e.jsxs("button",{onClick:y,className:"inline-flex items-center gap-2 rounded-md border border-red-200 px-3 py-2 text-sm text-red-600 hover:bg-red-50",children:[e.jsx(ve,{size:14,className:"text-red-500"}),"Clear history"]})]})]}),v?r.length===0?e.jsxs("p",{className:"text-gray-500 text-sm",children:['No quotations matched "',x,'". Try another term.']}):e.jsx("div",{className:"grid gap-2 sm:grid-cols-2 lg:grid-cols-3",children:r.map(h=>e.jsxs("div",{className:"rounded-lg border border-gray-200 p-3 text-xs transition hover:border-indigo-300 hover:bg-indigo-50/60",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("p",{className:"font-semibold text-gray-800 truncate text-sm",title:`${h.pdfName}.pdf`,children:[h.pdfName,".pdf"]}),e.jsx("p",{className:"text-[11px] text-gray-500 truncate",title:h.invoiceTo||"Unnamed client",children:h.invoiceTo||"Unnamed client"})]}),e.jsxs("div",{className:"flex gap-1 shrink-0",children:[e.jsx("button",{onClick:()=>u(h),className:"inline-flex h-7 w-7 items-center justify-center rounded-md border border-indigo-200 text-indigo-600 hover:bg-indigo-50","aria-label":"Load quotation",children:e.jsx(Ct,{size:14})}),e.jsx("button",{onClick:()=>w(h.id),className:"inline-flex h-7 w-7 items-center justify-center rounded-md border border-red-200 text-red-500 hover:bg-red-50","aria-label":"Delete quotation",children:e.jsx(ve,{size:14})})]})]}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-1 text-[10px] font-medium text-gray-600",children:[e.jsxs("span",{className:"rounded-full bg-slate-100 px-2 py-0.5",children:[h.lineItems?.length||0," types â€¢ ",h.itemsCount||0," pcs"]}),e.jsxs("span",{className:"rounded-full bg-slate-100 px-2 py-0.5",children:["Total Rs.",(h.totals?.totalAfterDiscount||0).toLocaleString()]}),e.jsxs("span",{className:"rounded-full bg-slate-100 px-2 py-0.5",children:["Balance Rs.",(h.totals?.balanceDue||0).toLocaleString()]}),e.jsx("span",{className:"rounded-full bg-slate-100 px-2 py-0.5",children:h.eventDate?b(h.eventDate):"No event date"})]}),e.jsxs("p",{className:"mt-2 text-[10px] uppercase tracking-wide text-gray-400",children:["Saved ",N(h.savedAt)]})]},h.id))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"Generate a quotation to see it appear in your history list."})]})})},Mt={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{duration:.4}}},Me="slf-quotation-history",Et=1e3,Ee=[{label:"Acc No",value:"8011371317"},{label:"Bank Name",value:"Commercial Bank"},{label:"Branch",value:"Galle"},{label:"Acc Holder Name",value:"J.W.C.Thushara"}],Ot=()=>{const[i,r]=c.useState([]),[x,d]=c.useState(!1),[y,u]=c.useState(""),[w,b]=c.useState(""),[N,v]=c.useState(""),[h,M]=c.useState(""),[I,E]=c.useState(""),D=new Date().toISOString().slice(0,10),[T,Y]=c.useState(D),[A,G]=c.useState(!1),[f,R]=c.useState(!1),[j,H]=c.useState(!1),[L,q]=c.useState(!1),[k,X]=c.useState(()=>{if(typeof window>"u")return[];try{const s=localStorage.getItem(Me);if(!s)return[];const o=JSON.parse(s);return Array.isArray(o)?o:[]}catch{return[]}}),[O,m]=c.useState(""),B=c.useRef({}),F=i.reduce((s,o)=>s+o.quantity,0),[se,Be]=c.useState(mt),_e=s=>(s||"").split(" ").map(o=>o[0]).join("").slice(0,2).toUpperCase(),We=c.useMemo(()=>{if(!O.trim())return k;const s=O.trim().toLowerCase();return k.filter(o=>[o.pdfName,o.invoiceTo,o.invoiceDate,o.eventDate,(o.lineItems||[]).map(a=>a.name).join(" ")].filter(Boolean).join(" ").toLowerCase().includes(s))},[O,k]),ae=s=>{const l=`<svg xmlns='http://www.w3.org/2000/svg' width='400' height='400'><rect fill='%23ede9fe' width='100%' height='100%'/><text x='50%' y='50%' dy='.35em' font-family='Arial, Helvetica, sans-serif' font-size='120' text-anchor='middle' fill='%2306366f'>${_e(s)||"+"}</text></svg>`;return`data:image/svg+xml;utf8,${encodeURIComponent(l)}`},je=s=>(typeof s?.image=="string"?s.image.trim():"")||ae(s?.name),Ne=(s,o,t)=>{s.setFillColor(0,47,108),s.rect(0,t-20,o,20,"F"),s.setTextColor(255,255,255),s.setFontSize(10),s.text("Thank you for choosing South Lanka Fireworks!",o/2,t-8,{align:"center"})},ce=s=>{const o=s instanceof Date?s:new Date(s),t=String(o.getDate()).padStart(2,"0"),a=String(o.getMonth()+1).padStart(2,"0"),l=o.getFullYear();return`${t}/${a}/${l}`},Qe=s=>{if(!s)return"Unknown";try{return new Date(s).toLocaleString("en-GB",{dateStyle:"medium",timeStyle:"short"})}catch{return s}},Ye=(s,o)=>{const t=je(s),a=i.find(l=>l.id===s.id&&l.size===o.size);r(a?i.map(l=>l.id===s.id&&l.size===o.size?{...l,quantity:l.quantity+1,image:l.image||t}:l):[...i,{id:s.id,name:s.name,size:o.size,price:o.price,quantity:1,image:t}]),u(`${s.name} (${o.size}) added to cart!`),d(!0),setTimeout(()=>d(!1),2500)},qe=s=>{r(i.filter(o=>!(o.id===s.id&&o.size===s.size)))},Oe=()=>{if(!k.length)return;(typeof window>"u"?!0:window.confirm("Clear all saved quotations?"))&&X([])},Ue=s=>{X(o=>o.filter(t=>t.id!==s))},Ve=s=>{if(!s)return;const o=(s.lineItems||[]).map(p=>({...p,price:p.price??0,quantity:p.quantity??1})),t=s.inputs||{};r(o),b(t.pdfName??s.pdfName??""),E(t.invoiceTo??s.invoiceTo??"");const a=t.eventDate??(s.eventDate||D);Y(a),v(t.discount??(typeof s.totals?.discount=="number"?String(s.totals.discount):"")),M(t.advance??(typeof s.totals?.advance=="number"?String(s.totals.advance):"")),R(!!s.includeGallery);const l=t.includeBankDetails??s.includeBankDetails;H(typeof l=="boolean"?l:!0),u("Quotation loaded for editing"),d(!0),setTimeout(()=>d(!1),2200),document.getElementById("custom-package")?.scrollIntoView({behavior:"smooth"})},Ke=({name:s,size:o,price:t,qty:a})=>{const l=(s||"").trim();if(!l)return u("Please enter an item name"),d(!0),setTimeout(()=>d(!1),2200),!1;const p=(o||"").trim(),C=parseFloat(t)||0,P=parseInt(a,10),_=Math.max(1,Number.isNaN(P)?1:P),W=`custom-${Date.now()}`,Q=ae(l),oe={id:W,name:l,size:p,price:C,quantity:_,image:Q};r(K=>[...K,oe]);try{const K={id:W,name:l,image:Q,sizes:[{size:p||"Custom",price:C}]};Be(ne=>[K,...ne])}catch{}return u(`${l} added to cart!`),d(!0),G(!1),setTimeout(()=>d(!1),2200),!0};c.useEffect(()=>{try{localStorage.setItem(Me,JSON.stringify(k))}catch{}},[k]);const Xe=(s,o)=>{r(i.map(t=>t.id===s.id&&t.size===s.size?{...t,quantity:o}:t))},Je=(s,o)=>{r(i.map(t=>t.id===s.id&&t.size===s.size?{...t,name:o}:t))},Ze=(s,o)=>{r(i.map(t=>t.id===s.id&&t.size===s.size?{...t,size:o}:t))},et=(s,o)=>{r(i.map(t=>t.id===s.id&&t.size===s.size?{...t,price:o===""?"":isNaN(parseFloat(o))?0:parseFloat(o)}:t))},de=i.reduce((s,o)=>s+(parseFloat(o.price)||0)*o.quantity,0),me=Number(N)||0,J=Math.max(de-me,0),U=Math.min(Number(h)||0,J),ge=Math.max(J-U,0),V=(s,o=600)=>new Promise(t=>{const a=new Image;a.crossOrigin="Anonymous",a.src=s,a.onload=()=>{const l=Math.min(1,o/a.width),p=document.createElement("canvas");p.width=a.width*l,p.height=a.height*l;const C=p.getContext("2d");C.clearRect(0,0,p.width,p.height),C.drawImage(a,0,0,p.width,p.height);const P=p.toDataURL("image/png",.9);t(P)},a.onerror=()=>t(null)}),tt=(s,o=320)=>new Promise(t=>{const a=new Image;a.crossOrigin="Anonymous",a.src=s,a.onload=()=>{const l=document.createElement("canvas");l.width=o,l.height=o;const p=l.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,o,o);const C=Math.max(o/a.width,o/a.height),P=a.width*C,_=a.height*C,W=(o-P)/2,Q=(o-_)/2;p.drawImage(a,W,Q,P,_),t(l.toDataURL("image/png",.9))},a.onerror=()=>t(null)}),ke=async s=>{const o=s||ae("Item"),t=`${o}-square`;if(B.current[t])return B.current[t];const a=await tt(o,320);return a&&(B.current[t]=a),a},Ce=s=>new Promise(o=>{const t=new Image;t.crossOrigin="Anonymous",t.src=s,t.onload=()=>{const a=document.createElement("canvas"),l=210,p=297;a.width=l*4,a.height=p*4,a.getContext("2d").drawImage(t,0,0,a.width,a.height),o(a.toDataURL("image/png"))},t.onerror=()=>o(null)}),st=async()=>{if(i.length===0){alert("No items selected!");return}const s=new Date,o=(w||"").trim()||`quotation-${s.getTime()}`,t=new ct({orientation:"p",unit:"mm",format:"a4",compress:!0});t.setFont("helvetica","normal");const a=t.internal.pageSize.getWidth(),l=t.internal.pageSize.getHeight(),p=g=>{if(typeof t.setGState=="function"&&typeof t.GState=="function")try{t.setGState(new t.GState({opacity:g}))}catch{}},[C,P]=await Promise.all([Ce("/assets/invoice-bg.png"),Ce("/assets/SouthLankaFireworks.png")]),[_,W,Q,oe,K,ne]=await Promise.all([V("/assets/icon-reg.png"),V("/assets/icon-person.png"),V("/assets/icon-address.png"),V("/assets/icon-phone.png"),V("/assets/icon-email.png"),V("/assets/icon-web.png")]),Se=f?await Promise.all(i.map(async g=>{const z=await ke(je(g));return z||ke(ae(g.name||"Item"))})):[];C&&t.addImage(C,"PNG",0,0,a,l),t.setFillColor(0,47,108),t.rect(0,0,a,25,"F"),P&&t.addImage(P,"PNG",10,3,25,20),t.setFontSize(30),t.setFont("helvetica","thin"),t.setTextColor(255,255,255),t.text("South Lanka Fireworks",a/2,16,{align:"center"}),t.setFontSize(14),t.text("INVOICE",a-15,15,{align:"right"});let n=32;const S=4;t.setFont("helvetica","normal"),t.setFontSize(10),t.setTextColor(0),_&&t.addImage(_,"PNG",a-72,n-3,S,S),t.text("Reg.No : SG/5276",a-66,n),n+=5,W&&t.addImage(W,"PNG",a-72,n-3,S,S),t.text("J.W. Chaminda Thushara.",a-66,n),n+=5,Q&&t.addImage(Q,"PNG",a-72,n-3,S,S),t.text("07 Dadalla Cross Road,",a-66,n),n+=5,t.text("Dadalla, Galle.",a-66,n),n+=5,oe&&t.addImage(oe,"PNG",a-72,n-3,S,S),t.text("077 713 5516 / 091 224 6572",a-66,n),n+=5,K&&t.addImage(K,"PNG",a-72,n-3,S,S),t.text("southlankafireworks@gmail.com",a-66,n),n+=5,ne&&t.addImage(ne,"PNG",a-72,n-3,S,S),t.text("www.slfireworks.com",a-66,n),n=36,t.setFontSize(12),t.text("Invoice to :",14,n);const ze=I,he=35;t.text(ze,he,n);const at=t.getTextWidth(ze);t.setLineWidth(.2),t.line(he,n+1,he+at,n+1),n+=7;const Ie=ce(s);if(t.text("Date :",14,n),t.text(Ie,27,n),L&&T){const g=ce(T);t.text(`Event Date: ${g}`,14,n+7),n+=7}if(j){const g=n+7,z=Ee.map(({label:ee,value:ie})=>`${ee} : ${ie}`);t.setFontSize(11),t.setFont("helvetica","bold"),t.text("Bank Details",14,g),t.setFont("helvetica","normal");const Z=5;z.forEach((ee,ie)=>{t.text(ee,14,g+(ie+1)*Z)}),n=g+(z.length+1)*Z,n+=8}else n+=24;t.setFillColor(0,153,102),t.setTextColor(255,255,255),t.rect(14,n,a-28,8,"F"),t.setFontSize(11),t.setFont("helvetica","bold"),t.text("No",18,n+6),t.text("Item Description",40,n+6),t.text("Qty",110,n+6),t.text("Price",140,n+6),t.text("Total",175,n+6),n+=15,t.setTextColor(0),t.setFontSize(12),t.setFont("helvetica","normal");const Fe=8;if(i.forEach((g,z)=>{const Z=(parseFloat(g.price)||0)*g.quantity;z%2===0?(p(.45),t.setFillColor(230,230,230)):(p(.25),t.setFillColor(248,248,248)),t.rect(14,n-5,a-28,Fe,"F"),p(1),t.setTextColor(0),t.text(String(z+1).padStart(2,"0"),18,n),t.text(g.name+(g.size?` (${g.size})`:""),30,n),t.text(String(g.quantity),112,n,{align:"center"}),t.text(`Rs. ${(parseFloat(g.price)||0).toLocaleString()}`,155,n,{align:"right"}),t.text(`Rs. ${Z.toLocaleString()}`,190,n,{align:"right"}),n+=Fe}),n+=5,t.line(14,n,a-14,n),n+=8,t.setFillColor(212,212,212),t.rect(a-80,n-6,65,10,"F"),t.text(`Sub Total: Rs. ${de.toLocaleString()}`,a-20,n,{align:"right"}),n+=8,t.setFillColor(212,212,212),t.rect(a-80,n-6,65,10,"F"),t.text(`Discount: Rs. ${me.toLocaleString()}`,a-20,n,{align:"right"}),n+=8,U>0&&(t.setFillColor(212,212,212),t.rect(a-80,n-6,65,10,"F"),t.text(`Advance: Rs. ${U.toLocaleString()}`,a-20,n,{align:"right"}),n+=8),t.setFillColor(255,204,0),t.rect(a-80,n-6,65,10,"F"),t.setTextColor(0),t.text(`${U>0?"Balance Due":"Total Amount"}: Rs. ${(U>0?ge:J).toLocaleString()}`,a-20,n,{align:"right"}),Ne(t,a,l),f&&Se.length>0){const ue=(a-28-16)/3,re=ue-10,pe=re+18,De=3*Math.max(1,Math.floor((l-30-32+12)/(pe+12)));for(let te=0;te<i.length;te+=De){t.addPage();const Te=t.internal.pageSize.getWidth(),nt=t.internal.pageSize.getHeight();t.setFontSize(18),t.setFont("helvetica","bold"),t.setTextColor(6,54,111),t.text("Item Gallery",Te/2,20,{align:"center"}),i.slice(te,te+De).forEach((xe,fe)=>{const it=Math.floor(fe/3),ye=14+fe%3*(ue+8),be=30+it*(pe+12);t.setDrawColor(226,232,240),t.setFillColor(255,255,255),t.roundedRect(ye,be,ue,pe,3,3,"FD");const Ae=Se[te+fe];Ae&&t.addImage(Ae,"PNG",ye+5,be+5,re,re);const Re=26,rt=(xe.name||"Item").length>Re?`${(xe.name||"Item").slice(0,Re-3)}...`:xe.name||"Item";t.setFontSize(10),t.setTextColor(33,37,41),t.text(rt,ye+4,be+re+15)}),Ne(t,Te,nt)}}const Pe=i.map(g=>({id:g.id,name:g.name,size:g.size,quantity:g.quantity,price:parseFloat(g.price)||0,image:g.image||null})),ot={id:`quote-${s.getTime()}`,savedAt:s.toISOString(),pdfName:o,invoiceTo:I||"Unnamed client",invoiceDate:Ie,eventDate:T||"",includeGallery:f,includeBankDetails:j,inputs:{pdfName:w,invoiceTo:I,eventDate:T,discount:N,advance:h,includeBankDetails:j},totals:{subTotal:de,discount:me,advance:U,totalAfterDiscount:J,balanceDue:ge},lineItems:Pe,itemsCount:Pe.reduce((g,z)=>g+(z.quantity||0),0)};X(g=>[ot,...g].slice(0,Et)),t.save(`${o}.pdf`)};return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"min-h-screen bg-gradient-to-b from-indigo-50 via-white to-pink-50 py-10 px-3 md:px-10",id:"products",children:[e.jsx(dt,{children:e.jsx("title",{children:"South Lanka Fireworks - Products"})}),F>0&&e.jsxs(le.div,{className:"fixed top-20 right-5 z-50 flex items-center gap-2 bg-white/90 shadow-lg backdrop-blur-md px-4 py-2 rounded-full cursor-pointer hover:scale-105 transition",onClick:()=>document.getElementById("custom-package")?.scrollIntoView({behavior:"smooth"}),initial:{opacity:0,y:-30},animate:{opacity:1,y:0},children:[e.jsx(we,{size:20,className:"text-indigo-600"}),e.jsx("span",{className:"font-semibold text-indigo-700 text-base",children:F})]}),e.jsx(lt,{children:x&&e.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-[9999] w-full flex justify-center px-4 pointer-events-none",children:e.jsx(le.div,{initial:{opacity:0,y:-18},animate:{opacity:1,y:0},exit:{opacity:0,y:-18},transition:{duration:.28,ease:"easeOut"},className:"bg-green-600 text-white font-medium rounded-xl shadow-lg text-center px-5 py-3 w-full sm:w-auto max-w-md flex items-center justify-center pointer-events-auto",children:e.jsx("span",{className:"flex items-center gap-2 text-white",children:e.jsx("span",{className:"text-white",children:y||"Added to cart âœ…"})})})})}),e.jsx(Tt,{isOpen:A,onClose:()=>G(!1),onAddItem:Ke}),e.jsxs("div",{className:"max-w-5xl mx-auto text-center mb-10",children:[e.jsx("h2",{className:"text-3xl font-extrabold text-gray-800 mb-1 tracking-tight",children:"ðŸ’¥ Explore Our Fireworks"}),e.jsx("p",{className:"text-gray-600 text-base",children:"Select your favorite fireworks and create your dream package!"})]}),e.jsx(Rt,{products:se,productVariants:Mt,onAddToCart:Ye,onAddCustomItem:()=>G(!0)}),e.jsx(Lt,{items:i,onNameChange:Je,onSizeChange:Ze,onPriceChange:et,onQtyChange:Xe,onRemoveItem:qe,pdfName:w,onPdfNameChange:b,invoiceTo:I,onInvoiceToChange:E,eventDate:T,onEventDateChange:Y,includeEventDate:L,onIncludeEventDateChange:q,includeBankDetails:j,onIncludeBankDetailsChange:H,bankDetails:Ee,includeGallery:f,onIncludeGalleryChange:R,discount:N,onDiscountChange:v,advance:h,onAdvanceChange:M,totalAfterDiscount:J,balanceDue:ge,onGenerateReport:st})]}),e.jsx($t,{quoteHistory:k,filteredHistory:We,historySearch:O,onHistorySearchChange:m,onClearHistory:Oe,onLoadQuote:Ve,onDeleteQuote:Ue,formatDateDDMMYYYY:ce,formatDateTimeReadable:Qe})]})};export{Ot as default};
